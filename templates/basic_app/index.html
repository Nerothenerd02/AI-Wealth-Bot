{% extends 'basic_app/base.html' %}
{% load static %}
{% block content %}

<div class="row">
  <div class="col">
    <div class="card card-body">
      <div class="row">
        <div class="col-2"></div>
        <div class="col-2">
          <img class="img-fluid" src="{% static 'images/favicon.jpeg' %}" alt="Logo">
        </div>
        <div class="col">
          <h2 style="margin-top: 0.5em">Welcome to AIWealthBot</h2>
        </div>
      </div>
      <div class="row">
        <p>An AI based financial adviser and portfolio manager. AIWealthBot allows users to look up stock quotes and offers streamlined technical
and financial analysis, news analysis, future price predictions, and simple
recommendations to buy, sell or hold stocks. Users can also set up their own
portfolios and receive recommendations to maximize profits.</p>
      </div>
    </div>
  </div>

  <div class="col">
    <div class="card card-body">
      <h2 class="text-center">Your Portfolio</h2>
      <table class="table table-sm text-center">
        <thead>
          <tr>
            <th>#</th>
            <th>Stock Symbol</th>
            <th>Stock Name</th>
            <th>Quantity</th>
            <th>Date Added</th>
          </tr>
        </thead>
        <tbody>
          {% for stock in portfolio_stocks %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ stock.stock_symbol }}</td>   
            <td>{{ stock.stock_name }}</td>       
            <td>{{ stock.quantity }}</td>
            <td>{{ stock.date_added|date:"F j, Y, g:i a" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-muted">No stocks in your portfolio yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="text-center mt-3">
        <a href="{% url 'basic_app:portfolio' %}" class="btn btn-primary">View Full Portfolio</a>
      </div>
    </div>
  </div>
</div>

<br><br>

<div class="row">
  <h2 class="text-center">Trending News</h2>
  <br><br>

  {% for key, value in news.items %}
  <div class="col-4 d-flex">
    <div class="card mb-3">
      {% if value.urlToImage %}
      <img class="card-img-top" src="{{ value.urlToImage }}" alt="News image" style="height: 50%; object-fit: cover;">
      {% endif %}
      <div class="card-body">
        <h5 class="card-title">{{ value.title }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">Source: {{ value.source.name }}</h6>
        <p class="card-text">{{ value.description }}</p>
        <a href="{{ value.url }}" class="btn btn-primary">See Article</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
